<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Resource Allocator - {{title}}</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">

    <!-- Custom styles for this template -->
    <link href="{{ url_for('static', filename='css/navbar.css') }}" rel="stylesheet">

    <script src="{{ url_for('static', filename='jquery-3.1.0.min.js') }}"></script>
    {% block headscript %}{% endblock %}
  </head>

  <body>
<div class="container">

{% if g.user.is_authenticated and g.user.name=="admin" %}
      <!-- Static navbar -->
      <nav class="navbar navbar-default">
        <div class="container-fluid">
          <div class="navbar-header">
            
            <span class="navbar-brand">Resource Allocation System</span>
          </div>
          <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
              <li><a href="{{url_for('allrequests')}}">Request Log</a></li>
              <li><a href="{{url_for('users')}}">Users</a></li>
              <li><a href="{{url_for('resources')}}">Resources</a></li>
              <li><a href="{{url_for('roles')}}">Roles</a></li>

            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a style="padding-right:0px" disabled="disabled">{{ g.user.name }}</a></li>
                <li><a style="padding-right:0px" disabled="disabled">|</a></li>
                <li><a href="{{ url_for('logout') }}">Logout</a></li>
            </ul>
            
          </div><!--/.nav-collapse -->
        </div><!--/.container-fluid -->
      </nav>

            {% endif %}
    </div>
<div class="container" style="vertical-align: center; max-width:500px;">

    {% if noroles %}
    <div style="text-align:center">
        <h3>Create <a href="{{url_for('addrole')}}">roles</a> before adding users</h3>
    </div>
    {% else %}
    <form class="form-signin" action="" method="post" name="registration">
        <h2 class="form-signin-heading">{% if isedit %}Edit{% else %}Create{% endif %} User</h2>
        {{ form.hidden_tag() }}

        <label for="name" class="sr-only">Name</label>
        {{ form.name(class="form-control", placeholder="Name", style="margin-bottom: 5px;") }}
        <label for="email" class="sr-only">Email address</label>
        {{ form.email(class="form-control", placeholder="Email", style="margin-bottom: 5px;") }}
        
        <label for="password" class="sr-only">Password</label>
        {{ form.password(class="form-control", placeholder="Password", style="margin-bottom: 5px;") }}
        
        <label for="confirm" class="sr-only">Confirm Password</label>
        {{ form.confirm(class="form-control", placeholder="Confirm Password", style="margin-bottom: 5px;") }}

        <label for="role" class="sr-only">Role</label>
        {{ form.role(class="form-control", placeholder="Role", style="margin-bottom: 5px;")}}
        
        <div style="text-align: center; color: #CC0000;">
            {% for field, errors in form.errors.items() %}
            {% for error in errors %}
            {{ error }}<br>
            {% endfor %}
            {% endfor %}
            {% if g.myerror != "" %}
            {{g.myerror}}<br>
            {% endif %}
        </div>
        <div style="margin: 10px 0px 10px 0px;text-align:center;">
            <button class="btn btn-md btn-primary" type="submit">
                {% if isedit %}Update{% else %}Create{% endif %}
            </button>
            {% if isedit %}<a href="{{ url_for('users') }}" role="button"
                              class="btn btn-warning btn-">Cancel</a>{% endif %}
        </div>
    </form>
    {% endif %}
</div> <!-- /container -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
  </body>
</html>
